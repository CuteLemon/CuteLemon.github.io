优达学城AB测试设计。

## 试验设计

免费试学筛选器  
在进行此试验时，优达学城当前的主页上有两个选项：“开始免费试学”和“访问课程资料”。
如果学生点击“开始免费试学”，系统将要求他们输入信用卡信息，然后他们将进入付费课
程版本的免费试学。14 天后，将对他们自动收费，除非他们在此期限结束前取消试用。若
学生点击“访问课程材料”，他们将能够观看视频和免费进行小测试，但是他们不会获得导
师指导支持或验证证书，无法提交最终项目来获取反馈。
在此试验中，优达学城测试了一项变化，如果学生点击“开始免费试学”，系统会问他们有
多少时间投入到这个课程中。如果学生表示每周 5 小时或更多，将按常规程序进行登录。
如果他们表示一周不到 5 小时，将出现一条消息说明优达学城的课程通常需要更多的时间
投入才能成功完成，并建议学生可免费访问课程资料。在这里，学生可选择继续进行免费试
学，或免费访问课程资料。
我们的假设是这会为学生预先设定明确的期望，从而减少因为没有足够的时间而离开免费试
学，并因此受挫的学生数量，同时不会在很大程度上减少继续通过免费试学和最终完成课程
的学生数量。如果这个假设最后为真，优达学城将改进整体学生体验和ᨀ高导师为能够完成
课程的学生提供支持的能力。
转移单位为 cookie，尽管学生参加的是免费试学，但在登录后他们的用户 id 便被跟踪。同
一个用户 id 不能两次参加免费试学。对于不参加免费试学的用户，他们的用户 id 不会在
试验中被跟踪，即使他们在访问课程概述页面时登录了网站。

#### 度量选择
- **不变度量：** cookie的数量，点击次数，点击概率
- **评估度量：** 留存率，净转化率，总转化率


#### 选择原因
度量的选择标准是判断实验是否会对度量造成影响。cookie的数量以及点击次数和点击概率是不受实验条件改变的，作为不变度量。留存率，净转化率和总转化率都是受付款/注册学生数量影响的量，本次的实验改变预计会造成付款/注册学生的数量改变，故选择这三个度量作为评估度量。用户id数量可以作为一个评估度量，但相较比率度量，用户id数量是一个原始数据，不具备较强的抗干扰能力。故不将其作为评估度量。
#### 实验期望
用户的总转化率降低，净转换率和留存率不下降。

### 测量标准偏差
> 列出你的每个评估度量的标准偏差。对于每个评估度量，说明你是否认为分析估计与经验变异是类似的，或者你是否期望它们是不同的（如果是这样，在时间允许的情况下将有必要进行经验估计）。简要说明每个情况的理由。

<!-- ||
|--------------|
|Unique cookies to view page per day|40000
|Unique cookies to click "Start free trial" per day|3200
|Enrollments per day|660
|Click-through-probability on "Start free trial"|0.08
|Probability of enrolling, given click|0.20625
|Probability of payment, given enroll|0.53
|Probability of payment, given click|0.1093125 -->

- 总转化率：0.0202
- 留存率：0.0549
- 净转换率：0.0156

由于数据是典型的二项式分布，在数据量很大时可以将数据作为正态分布处理。对于总转化率和净转换率，因为其分析单位和引流单位都是cookie,所以分析估计与经验变异应当是接近的。对于留存率，其分析单位是注册量，与引流单位不一致。需要实施另一个A/A测试来得到该度量的变异性。




## 规模

### 样本数量和效力
>说明你是否会在分析阶段使用 Bonferroni 校正，并给出你适当开展试验所需的支持网页访问数。

>持续时间和风险暴露
说明你会将哪一部分流量转入此试验，以及鉴于此条件，你需要多少天来运行试验。
说明你选择所转移流量部分的原因。你认为此试验对优达学城来说有多大风险？

- 在分析阶段并不会使用Bonferroni校正，因为观测量只有三个，且观测量之间还并非独立的，假阳性出现的概率会比14.62%小很多。  
- 实验中出现留存率实验需要4741212浏览量，对于Udacity来说太过巨大。所以并不会将该度量纳入实验。总转化率需要645875浏览量，净转化率需要685325浏览量。取较大者685325。  
- 该项试验并不会收集任何用户的敏感数据，也不会对系统的数据库等后台造成影响，所以可以将Udacity的所有流量都导入到这个实验中。整个实验预计需要18天完成。

## 试验分析

>合理性检查
对于每个不变度量，对你期望观察到的值、实际观察的值及度量是否通过合理性检查给出 95% 置信区间
对于任何未通过的合理性检查，根据每日数据解释你猜测的最可能的原因。在所有合理性检查通过前，不要开始其他分析工作。

#### 不变度量检查
<!-- |			|Pageviews	|Clicks|
|-----------|-----------|--|--
|Control	|345543		|28378|0.0821258
|Experiment	|344660		|28325|0.0821824
|Sum		|690203		|56703| -->

<!-- sd = sqrt(p*(1-p)/N)
p = control group's Probability,N = number of control group
m = sd*z_score
z_score = 1.96 -->


|			|cookie数量	|'免费试学'点击量|点击概率
|-----------|-----------|-----------------|--
|SD	|0.000601841		|0.002099747|0.000467068
|置信区间	|[0.4988,0.5012]|[0.4959,0.5041]|[0.0812,0.0830]
|通过检验		|是		|是|是



#### 效应大小检验
>对于每个评估度量，对试验和对照组之间的差异给出 95% 置信区间。说明每个度量是否具有统计和实际显著性。

<!-- ||Clicks|Enroll|Payment
|--|--|--|--|
|Control|17293|3785|2033
|Experiment|17260|3423|1945 -->

||总转化率|净转化率|
|--|-------|--------|
|置信区间|[-0.0291,-0.0120]|[-0.0116,0.0019]
|d_min|0.01|0.0075
|统计显著|是|否
|实际显著|是|否

#### 符号检验

>对于每个评估度量，使用每日数据进行符号检验，然后报告符号检验的 p 值以及结果是否具有统计显著性。

将实验组比率大于控制组记作成功事件。实验天数为23天。

||成功计数值|p-value	|统计显著
|--|---------------------|----------|------------------------
|总转化率|19			|0.0026		|是|
|净转化率|13			|	0.6776	|否	|

#### 汇总

>说明你是否使用了 Bonferroni 校正，并解释原因。若效应大小假设检验和符号检验之间存在任何差异，描述差异并说明你认为导致差异的原因是什么。

因为需要观测的变量只有两个，第一类错误风险仍然处于低水平。故本次实验未使用Bonferroni校正。假设检验与符号检验的结果一致。网站的新界面能够降低用户总转化率至少1%。但是并不能确定新界面对用户净转化率的影响。需要开展后续实验。

#### 建议

>提供建议并简要说明你的理由。

此次AB测试并不能完全验证实验最初设定的指标。可以肯定新界面确实带来了总转化率的下降，但是目前的实验不能得出净转化率没有下降或下降小于0.075%的结论。出于商业利益考虑，不推荐Udacity发布此新界面。

## 后续试验

>如果你想减少受挫并想要提前终止课程的学生数量，你会尝试什么试验？简要叙述你会做出的改变，你对变化影响的假设是什么，你想要测量什么度量，你想要使用什么转移单位。对每个选择提供解释。

我的假设是学生在受挫时如果能够得到及时的提醒和帮助将会显著减少其提前终止课程的数量。我认为受挫的学生可能是因为在学习材料时遇到了困难。这可能表现为他们在练习页面多次提交了错误答案。对于这部分学生，可以发送提示消息提醒他可以在论坛区寻找相关的帮助。

#### 定义

- 学习行为：学生在Udacity的学习活动，表现为看视频，论坛阅读/回复/发帖等。技术上为了简单可以直接将用户登录判定为学习行为。
- 学生终止课程：当学生15天内没有学习行为时，判定为学生终止了课程。
- 难度阈值：统计学生在某次练习中的提交次数，以70%的学生都小于的提交次数作为阈值。
- 学习遇到困难：提交次数超过难度阈值即可认为学生在这道练习中遇到了困难。
- 受挫学生：学生在一天（一次登陆过程）中遇到了两次学习困难。

#### 引流单位

新注册的学生id。学生将会被随机的分配到实验组和控制组。因为实验需要跟踪学生的行为，故不能随机的按cookie来分配。

#### 评估度量

终止率：学生提前终止课程占学生总数的百分比。

#### 不变度量

受挫学生比率：受到过挫折的学生占学生总数的百分比。我预期两组试验的学生是按照纯粹的随机分配划分的，在样本量足够的情况下，那么两组学生遇到挫折的比率应该是接近的。

#### 试验设计

控制组：控制组保持界面和系统与之前相同。  
实验组：实验组在被判定为受挫学生时会到系统的推送信息，提醒他们可以求助的方法。

#### 实验预期

在两组学生的受挫学生比率基本相同的情况下，实验组的学生终止率会下降1%或更多。

## 参考资料
[Bonferroni_correction](https://en.wikipedia.org/wiki/Bonferroni_correction)  

[A/B Test](https://en.wikipedia.org/wiki/A/B_testing)

[统计显著性和实际显著性](http://support.minitab.com/zh-cn/minitab/17/topic-library/basic-statistics-and-graphs/introductory-concepts/p-value-and-significance-level/practical-significance/)
